<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.xaut.mapper.StudentMapper">

    <!-- 新增学生 -->
    <insert id="addStudent" parameterType="com.xaut.entity.Student">
		insert into db_student(sno,sname,depart,mailbox,updatetime,remark1,remark2)
		select #{sno},#{sName},#{depart},#{mailbox},#{updateTime},"预留","预留"
		from DUAL
		where not exists(
			select sno from db_student
		    where db_student.sno = #{sno}
		)
	</insert>
	
	<!-- 删除学生 -->
	<delete id="deleteStudent" parameterType="String">
        delete
		from db_student
		where db_student.sno = #{sno};
    </delete>
    
    <!-- 学生选课 -->
    <insert id="studentSelectCourse" parameterType="java.util.Map">
    	insert into db_studcour(sno,cno,state,score,updatetime,remark1,remark2)
		select #{sno},#{cno},#{state},#{score},#{updateTime},'预留','预留'
		from DUAL
		where not exists(
			select * from db_studcour
		    where db_studcour.sno = #{sno} and db_studcour.cno = #{cno}
		)
    </insert>
    
    <!-- 学生退课 -->
    <delete id="studentDeleteCourse">
    	delete
		from db_studcour
		where db_studcour.sno = #{sno} and db_studcour.cno = #{cno}
    </delete>
</mapper>