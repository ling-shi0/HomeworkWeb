<!DOCTYPE html>
<html lang="en" class="no-js">
<!-- 开始head -->
<head>
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript" defer="defer">
	function addBasePath(){
		//1.得到项目根路径：http://localhost:8080/myproject/
		var curWwwPath = window.document.location.href;
		var pathName = window.document.location.pathname;
		var pos = curWwwPath.indexOf(pathName);
		var localhostPaht = curWwwPath.substring(0,pos);
		var projectName = pathName.substring(0,pathName.substr(1).indexOf('/')+1);
		var realPath = localhostPaht + projectName;
		var basePath = realPath + '/';
		console.log(basePath);
		
		//2.添加根路径到html的base标签中
		var $base = '<base href="' + basePath + '">';
		$('head').prepend($base); //在头部添加
	}
	addBasePath();
</script>
<meta charset="utf-8"/>
<title>课程所布置作业列表的详细信息</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<!-- 0.最先：引入CSS -->
<!-- 开始全局强制样式 -->
<link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css"/>
<link href="assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
<link href="assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css"/>
<link href="assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="assets/global/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css"/>
<link href="assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css"/>
<!-- 结束全局强制样式 -->
<!-- 开始页级插件样式 -->
<link href="assets/global/plugins/jquery-file-upload/css/jquery.fileupload.css" rel="stylesheet"/>
<link href="assets/global/plugins/jquery-file-upload/css/jquery.fileupload-ui.css" rel="stylesheet"/>
<link href="assets/global/plugins/bootstrap-daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css"/>
<link href="assets/global/plugins/fullcalendar/fullcalendar.min.css" rel="stylesheet" type="text/css"/>
<link href="assets/global/plugins/jqvmap/jqvmap/jqvmap.css" rel="stylesheet" type="text/css"/>
<link href="assets/global/plugins/morris/morris.css" rel="stylesheet" type="text/css">
<!-- 结束页级插件样式 -->
<!-- 开始页面样式 -->
<link href="assets/admin/pages/css/tasks.css" rel="stylesheet" type="text/css"/>
<!-- 结束页面样式 -->
<!-- 开始主题样式 -->
<link href="assets/global/css/components-rounded.css" id="style_components" rel="stylesheet" type="text/css"/>
<link href="assets/global/css/plugins.css" rel="stylesheet" type="text/css"/>
<link href="assets/admin/layout4/css/layout.css" rel="stylesheet" type="text/css"/>
<link href="assets/admin/layout4/css/themes/light.css" rel="stylesheet" type="text/css" id="style_color"/>
<link href="assets/admin/layout4/css/custom.css" rel="stylesheet" type="text/css"/>
<link href="app/img/favicon.ico" rel="shortcut icon" />
<!-- 结束主题样式 -->
</head>
<!-- 结束head -->
<!-- 开始body -->
<body class="page-container-bg-solid">
<!-- 开始导航栏中间可变内容 -->
<div class="row">
	<div class="col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2">
		<div class="portlet box purple">
			<div class="portlet-title">
				<div class="caption">
					<i class="fa fa-comments"></i>
					课程所布置作业列表的详细信息
				</div>
			</div>
			<div id="courseList" class="portlet-body">
				<!-- 此处由JS编写 -->
			</div>
		</div>
	</div>
</div>
<!-- 结束导航栏中间可变内容 -->

<!-- 9999.最后：引入JS -->
<!-- 开始核心插件 -->
<script src="assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/jquery-migrate.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/jquery.cokie.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<!-- 结束核心插件 -->
<!-- 开始页级插件 -->
<script src="assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.js" type="text/javascript"></script>
<script src="assets/global/plugins/jquery-file-upload/js/jquery.fileupload-ui.js"></script>
<script src="assets/global/plugins/jqvmap/jqvmap/jquery.vmap.js" type="text/javascript"></script>
<script src="assets/global/plugins/jqvmap/jqvmap/maps/jquery.vmap.russia.js" type="text/javascript"></script>
<script src="assets/global/plugins/jqvmap/jqvmap/maps/jquery.vmap.world.js" type="text/javascript"></script>
<script src="assets/global/plugins/jqvmap/jqvmap/maps/jquery.vmap.europe.js" type="text/javascript"></script>
<script src="assets/global/plugins/jqvmap/jqvmap/maps/jquery.vmap.germany.js" type="text/javascript"></script>
<script src="assets/global/plugins/jqvmap/jqvmap/maps/jquery.vmap.usa.js" type="text/javascript"></script>
<script src="assets/global/plugins/jqvmap/jqvmap/data/jquery.vmap.sampledata.js" type="text/javascript"></script>
<script src="assets/global/plugins/morris/morris.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/morris/raphael-min.js" type="text/javascript"></script>
<script src="assets/global/plugins/jquery.sparkline.min.js" type="text/javascript"></script>
<!-- 结束页级插件 -->
<!-- 开始页级脚本 -->
<script src="assets/global/scripts/metronic.js" type="text/javascript"></script>
<script src="assets/admin/layout4/scripts/layout.js" type="text/javascript"></script>
<script src="assets/admin/layout2/scripts/quick-sidebar.js" type="text/javascript"></script>
<script src="assets/admin/layout4/scripts/demo.js" type="text/javascript"></script>
<script src="assets/admin/pages/scripts/index3.js" type="text/javascript"></script>
<script src="assets/admin/pages/scripts/tasks.js" type="text/javascript"></script>
<!-- 结束页级脚本 -->
<!-- 开始自定义JS -->
<script type="text/javascript">
/**
 * 重写方法,自定义格式化日期
 */
Date.prototype.toLocaleString = function() {
	// 补0   例如 2018/7/10 14:7:2  补完后为 2018/07/10 14:07:02
    function addZero(num) {
        if(num<10)
            return "0" + num;
        return num;
    }
    // 按自定义拼接格式返回
    return this.getFullYear() + "/" + addZero(this.getMonth() + 1) + "/" + addZero(this.getDate());
};

/**
 * function:打开|关闭数据表
 */
function openOrClose(obj){
	if($(obj).children("i").attr("class") == "fa fa-angle-up"){ //点击打开
		$(obj).children("i").attr("class","fa fa-angle-down");
		$(obj).parent().parent().next().slideToggle(500);
	}else{ //点击关闭
		$(obj).children("i").attr("class","fa fa-angle-up");
		$(obj).parent().parent().next().slideToggle(500);
	}
};

/**
 * function:前端页面获取前端页面传来的参数
 */
function GetPar(name) {
	var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
	var r = window.location.search.substr(1).match(reg);
	if(r != null)
		return decodeURIComponent(r[2]);
	return null;
};

/**
 * function:展示教师所开课程详细信息
 */
function showCourseListDetail(){
	//1.获得参数
	var cno = GetPar("cno");
	
	//2.展示数据
	$.ajax({
        url: '/HomeWorkWeb/work/getWorkListDetail',
        type: 'GET',
        async: false,
        data: {
        	cno: cno
        },
        success: function (response) {
        	if(response.data.length == 0){
        		var str = '<h4>' + response.message + '</h4>';
        		$("#courseList").html(str);
        	}
        	for(var i=0; i<response.data.length; i++){
        		var div = '';
        		div += '<div class="portlet light bordered"><div class="portlet-title">';
        		div += '<div class="caption">' + response.data[i].wname + '</div>';
        		div += '<div class="actions"><a href="javascript:;" class="btn btn-default btn-sm" onclick="openOrClose(this)"><i class="fa fa-angle-up"></i></a></div></div>';
        		div += '<div class="portlet-body" style="display: none;"><div class="table-scrollable"><table class="table table-bordered table-hover">';
        		div += '<tbody>';
        		div += '<tr><th>作业名</th><th>' + response.data[i].wname + '</th></tr>';
        		div += '<tr><th>作业描述</th><th>' + response.data[i].description + '</th></tr>';
        		div += '<tr><th>所属课程</th><th>' + response.data[i].cname + '</th></tr>';
        		div += '<tr><th>是否结课</th><th>' + response.data[i].isclassend + '</th></tr>';
        		div += '<tr><th>起始时间</th><th>' + new Date(response.data[i].start_time).toLocaleString() + '</th></tr>';
        		div += '<tr><th>截止时间</th><th>' + new Date(response.data[i].end_time).toLocaleString() + '</th></tr>';
        		div += '<tr><th>选课人数</th><th>' + response.data[i]['选课人数'] + '</th></tr>';
        		div += '<tr><th>已交作业人数</th><th>' + response.data[i]['已交作业人数'] + '</th></tr>';
        		div += '</tbody>';
        		div += '</table></div></div></div>';
        		$("#courseList").append(div);
        	}
        }
	})
};

/*
 * function:页面加载完成调用
 */
$(document).ready(function () {
	Metronic.init();
	showCourseListDetail(); //展示教师所开课程详细信息
});
</script>
</body>
<!-- 结束body -->
</html>